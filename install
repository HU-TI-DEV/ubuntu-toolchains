# bash script for installing the github.com/wovo
# C++ embedded development environment on ubuntu

# install what is available from the repositories
sudo apt install -y gcc-10 avrdude python-dev libsfml-dev

# install the stuff from my repository
git clone https://www.github.com/wovo/bmptk
git clone https://www.github.com/wovo/hwlib
git clone https://www.github.com/wovo/hwlib-examples
git clone https://www.github.com/wovo/godafoss

# install the AVR8 compiler
SOURCE=https://github.com/CrustyAuklet/avr-libstdcxx/releases/download/v10.2.0/avr-gcc-10.2.0-P0829-x86_64-linux.tar.gz 
DIR=avr-gcc-10.2.0-P0829 
wget $SOURCE -O ubuntu-toolchains/avr8-gcc.tgz
tar -xf ubuntu-toolchains/avr8-gcc.tgz
mv $DIR avr-gcc
sudo python ubuntu-toolchains/add_path.py ~/avr-gcc/bin
export PATH=~/$avr-gcc/bin:$PATH

# install the ARM/Cortex compiler
SOURCE=https://github.com/xpack-dev-tools/arm-none-eabi-gcc-xpack/releases/download/v10.2.1-1.1/xpack-arm-none-eabi-gcc-10.2.1-1.1-linux-x64.tar.gz
DIR=xpack-arm-none-eabi-gcc-10.2.1-1.1
wget $SOURCE -O ubuntu-toolchains/arm-gcc.tgz
tar -xf ubuntu-toolchains/arm-gcc.tgz
mv $DIR arm-gcc
sudo python ubuntu-toolchains/add_path.py ~/arm-gcc/bin
export PATH=~/$arm-gcc/bin:$PATH

# build the lpc21_isp tool
# and set root permission for TTY access
cd bmptk/tools/lpc21isp_197
make
sudo chown root lpc21isp_hr_linux.exe
sudo chmod +s lpc21isp_hr_linux.exe
sudo chmod +s `which avrdude`
cd ../../..
